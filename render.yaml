databases:
  - name: farmdb
    plan: free
    databaseName: farmdb
    user: farmuser

services:
  - type: web
    plan: free
    name: farm-management
    runtime: python
    rootDir: farm-management
    buildCommand: ./build.sh
    startCommand: >
      python -m gunicorn farm_management.asgi:application
      -k uvicorn.workers.UvicornWorker
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: farmdb
          property: connectionString
      - key: SECRET_KEY
        generateValue: true
      - key: DEBUG
        value: "False"
      - key: ALLOWED_HOSTS
        value: farm-management-g6yy.onrender.com  # Remove https:// and trailing /
      - key: CORS_ALLOWED_ORIGINS
        value: |
          https://farmmanagement.netlify.app,
          http://localhost:5173
      - key: WEB_CONCURRENCY
        value: "4"